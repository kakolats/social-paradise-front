<section class="mx-auto my-auto w-full px-4 py-6 sm:px-6 sm:py-8 md:w-2/3">
    <div class="rounded-2xl border border-slate-200 bg-white/80 p-4 shadow-lg backdrop-blur sm:p-6 md:p-8">
        <h2 class="mb-4 text-xl font-bold tracking-tight text-slate-900 sm:mb-6 sm:text-2xl md:text-3xl">
            Créer un utilisateur
        </h2>

        <!-- Messages -->
        <div *ngIf="successMessage()" class="mb-4 rounded-xl bg-green-50 border border-green-200 p-4 text-green-800">
            {{ successMessage() }}
        </div>
        <div *ngIf="errorMessage()" class="mb-4 rounded-xl bg-red-50 border border-red-200 p-4 text-red-800">
            {{ errorMessage() }}
        </div>

        <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-6">
            <!-- Email -->
            <div>
                <label class="mb-1 block text-sm font-medium text-slate-700 sm:text-base">
                    Adresse e-mail
                </label>
                <input
                    type="email"
                    formControlName="email"
                    class="w-full rounded-xl border border-slate-300 px-3 py-2 text-sm shadow-sm focus:border-slate-900 focus:ring-2 focus:ring-slate-900/10 sm:px-4"
                    placeholder="john.doe@example.com"
                />
                <p *ngIf="invalid('email')" class="mt-1 text-xs text-red-600 sm:text-sm">
                    <span *ngIf="form.controls.email.errors?.['required']">E-mail requis.</span>
                    <span *ngIf="form.controls.email.errors?.['email']">Format d'e-mail invalide.</span>
                </p>
            </div>

            <!-- Password -->
            <div>
                <label class="mb-1 block text-sm font-medium text-slate-700 sm:text-base">
                    Mot de passe
                </label>
                <input
                    type="password"
                    formControlName="password"
                    class="w-full rounded-xl border border-slate-300 px-3 py-2 text-sm shadow-sm focus:border-slate-900 focus:ring-2 focus:ring-slate-900/10 sm:px-4"
                    placeholder="••••••••"
                />
                <p *ngIf="invalid('password')" class="mt-1 text-xs text-red-600 sm:text-sm">
                    <span *ngIf="form.controls.password.errors?.['required']">Mot de passe requis.</span>
                    <span *ngIf="form.controls.password.errors?.['minlength']">Minimum 6 caractères requis.</span>
                </p>
            </div>

            <!-- Role -->
            <div>
                <label class="mb-1 block text-sm font-medium text-slate-700 sm:text-base">
                    Rôle
                </label>
                <select
                    formControlName="role"
                    class="w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-slate-900 focus:ring-2 focus:ring-slate-900/10 sm:px-4"
                >
                    <option [ngValue]="null" disabled>Sélectionnez un rôle</option>
                    <option value="ADMIN">Administrateur</option>
                    <option value="SECURITY">Sécurité</option>
                </select>
                <p *ngIf="invalid('role')" class="mt-1 text-xs text-red-600 sm:text-sm">
                    Rôle requis.
                </p>
            </div>

            <!-- Submit button -->
            <div class="flex gap-3 pt-4">
                <button
                    type="submit"
                    [disabled]="form.invalid || submitting()"
                    class="flex-1 rounded-xl bg-[#d36b3d] px-4 py-2 text-sm font-semibold text-white hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed sm:px-6 sm:py-3 sm:text-base"
                >
                    <span *ngIf="!submitting()">Créer l'utilisateur</span>
                    <span *ngIf="submitting()">Création en cours...</span>
                </button>
                <button
                    type="button"
                    (click)="form.reset()"
                    class="rounded-xl border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50 sm:px-6 sm:py-3 sm:text-base"
                >
                    Réinitialiser
                </button>
            </div>
        </form>
    </div>
</section>
